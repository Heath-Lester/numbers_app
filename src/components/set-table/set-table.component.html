<ng-container *ngIf="dataSource.data.length > 0; else loading">
	<mat-table
		matSort
		class="set-table mat-elevation-z2"
		[dataSource]="dataSource"
	>
		<!-- Index Definition -->
		<ng-container matColumnDef="index">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by index"
			>
				Index
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.index }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				><span class="footer-title">Ranges:</span> {{ footerData ? footerData.indexRangeStart : 0 }}-{{
					footerData ? footerData.indexRangeEnd : 0
				}}
			</mat-footer-cell>
		</ng-container>

		<!-- Draw Date Definition -->
		<ng-container matColumnDef="date">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by date"
			>
				Draw Date
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.date?.toLocaleDateString() ?? "-" }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? displayTimeSpan(footerData.drawDateSpan) : "--yrs --mths --dys" }}
			</mat-footer-cell>
		</ng-container>

		<!-- First Ball Definition -->
		<ng-container matColumnDef="firstBall">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by first ball"
			>
				First Ball
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.firstBall }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.firstBallRangeStart : 0 }}-{{
					footerData ? footerData.firstBallRangeEnd : 0
				}}
			</mat-footer-cell>
		</ng-container>

		<!-- Second Ball Definition -->
		<ng-container matColumnDef="secondBall">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by second ball"
			>
				Second Ball
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.secondBall }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.secondBallRangeStart : 0 }}-{{
					footerData ? footerData.secondBallRangeEnd : 0
				}}
			</mat-footer-cell>
		</ng-container>

		<!-- Third Ball Definition -->
		<ng-container matColumnDef="thirdBall">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by third ball"
			>
				Third Ball
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.thirdBall }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.thirdBallRangeStart : 0 }}-{{
					footerData ? footerData.thirdBallRangeEnd : 0
				}}
			</mat-footer-cell>
		</ng-container>

		<!-- Fourth Ball Definition -->
		<ng-container matColumnDef="fourthBall">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by fourth ball"
			>
				Fourth Ball
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.fourthBall }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.fourthBallRangeStart : 0 }}-{{
					footerData ? footerData.fourthBallRangeEnd : 0
				}}
			</mat-footer-cell>
		</ng-container>

		<!-- Fifth Ball Definition -->
		<ng-container matColumnDef="fifthBall">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by fifth ball"
			>
				Fifth Ball
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.fifthBall }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.fifthBallRangeStart : 0 }}-{{
					footerData ? footerData.fifthBallRangeEnd : 0
				}}
			</mat-footer-cell>
		</ng-container>

		<!-- Mega Ball Definition -->
		<ng-container matColumnDef="megaBall">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by first ball"
			>
				Mega Ball
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.megaBall }} </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.megaBallRangeStart : 0 }}-{{ footerData ? footerData.megaBallRangeEnd : 0 }}
			</mat-footer-cell>
		</ng-container>

		<!-- Megaplier Definition -->
		<ng-container matColumnDef="megaplier">
			<mat-header-cell
				*matHeaderCellDef
				mat-sort-header
				sortActionDescription="Sort by megaplier"
			>
				Megaplier
			</mat-header-cell>
			<mat-cell *matCellDef="let row"> {{ row.megaplier }}x </mat-cell>
			<mat-footer-cell *matFooterCellDef
				>{{ footerData ? footerData.megaplierRangeStart : 0 }}-{{
					footerData ? footerData.megaplierRangeEnd : 0
				}}
				<span class="footer-total">Total: {{ footerData ? footerData.totalSets : 0 }}</span>
			</mat-footer-cell>
		</ng-container>

		<!-- Header and Row Declarations -->
		<mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
		<mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
		<mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></mat-footer-row>
	</mat-table>
</ng-container>

<ng-template #loading>
	<mat-card>
		<mat-card-header class="set-table-loader-header">
			<mat-progress-bar mode="query"></mat-progress-bar>
		</mat-card-header>
	</mat-card>
</ng-template>
